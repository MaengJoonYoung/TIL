# **기본키(PK)와 외래키(FK)**

<br>

*지난주에 기본키와 외래키를 사용하여 테이블을 JOIN하고 쿼리를 날리고 했지만, 기본키와 외래키에 대한 명확한 이해가 부족하다고 생각해서 오늘은 기본키와 외래키에 대해서 조금 더 알아보는 시간을 가졌다..!*

<br>
<br>

## **1. 기본키(Primary Key)**
<br>

*기본키는 테이블에 존재하는 레코드를 가장 잘 식별 할 수 있는 열의 조합이다.*

<br>

***다음과 같은 테이블을 예로 생각해보자.***
<br>
<br>

|이름|주민번호|
|---|---|
|김준영|980101-1111111|
|김준영|970102-1212121|

<br>
해당 테이블에서 각 레코드를 식별하는데 가장 적절한 키는 무엇일까. 이름의 경우 '김준영'이라는 이름이 중복되기에 레코드를 식별하기는 어려울 것이다. 반대로 주민번호의 경우 모든 사람들이 각자 다른 주민번호를 갖고 있기에 위의 테이블 처럼 이름이 중복되더라도 각 레코드를 식별하는데 매우 유용한 역할을 할 것이다.

<br>

*즉, 위와 같은 테이블에서는 주민번호를 기본키로 사용하는 것이 옳다.*
<br>
<br>

***그렇다면 기본키의 기능은 무엇일까?***
<br>
<br>
*첫째, 데이터의 중복값을 막아준다*
<br>

만약 기본키가 설정되어 있지 않는 상태에서 위의 테이블의 첫번째 행과 동일한 데이터를 반복해서 테이블에 추가하는 상황을 생각해보자. 이렇게 된다면 나중에 데이터가 필요한 상황에 어떤 데이터가 정확한 데이터인지 알 수 없다. 기본키는 이러한 문제를 예방시켜준다.

<br>

*둘째, 원하는 데이터를 빠르게 얻을 수 있다.*
<br>

기본키는 테이블에서 고유한 값을 갖기때문에 기본키를 활용하여 원하는 데이터를 빠르게 찾을 수 있다.

<br>
<br>

## **2. 외래키 (Foreign Key)**
<br>

*외래키는 참조하는 테이블의 레코드를 식별할 수 있는 키를 말한다. 즉, 참조하는 테이블의 기본키이다.*
<br>

이렇게만 말해서는 사실 잘 이해가 가지 않는다. 조금 더 이해하기 위해서 우선 외래키가 왜 필요한지 생각해보자.

<br>
도서관에서 책을 대여할 때 대여한 사람과 대여한 책의 정보가 같이 기록되는 테이블을 생각해보자.
<br>
<br>

|이름|학번|책 이름|책 번호|
|---|---|---|---|
|김준영|1234|사과|101|
|김준영|1234|딸기|201|
|김준영|1234|홍시|403|
|김준영|1234|수박|504|

<br>
이렇게 한명의 학생이 여러개의 책을 빌릴 경우 대여한 사람에 대한 정보가 중복되어 기록되는 걸 볼 수 있다. 이러한 상황이 계속해서 발생하면 상당한 양의 중복 데이터가 생성되며 비효율을 발생시킬 것이다. 이를 해결하기 위해서는 학생의 정보를 기록하는 '학생' 테이블과 책과 관련된 '책' 정보를 기록하는 테이블을 나누는 것이다.

<br>

|이름|학번|
|---|---|
|김준영|1234|

<br>

|책이름|책번호|
|---|---|
|사과|101|
|딸기|201|
|홍시|404|
|수박|504|

<br>
하지만 이렇게 나누면 '책' 테이블만 봐서는 누가 책을 대여했는지 알 수 없다는 문제가 발생한다. 이 문제를 해결하기 위해 '학생' 테이블의 기본키를 가져오는 것이다. 여기서는 학번을 기본키라고 생각하자.

<br>

|책이름|책번호|학번|
|---|---|---|
|사과|101|1234|
|딸기|201|1234|
|홍시|404|1234|
|수박|504|1234|

<br>

*이렇게 '책' 테이블에서 학번이 바로 외래키가 되는 것이고 외래키로 인해 중복데이터 없이 데이터를 관리하고 저장할 수 있게 된다.*

정리하자면, 외래키는 테이블과 테이블을 연결해주는 역할을 한다. 이런 역할을 하면서 데이터베이스의 무결성도 높여줄 수 있다. 예를 들어 '책' 테이블에 타학교 학생의 데이터를 삽입한 경우 외래키가 기본키인 '학생' 테이블에서 해당 학생의 정보가 없기에 오류가 발생되며 데이터 삽입을 막아준다.

<br>
<br>
<br>


### ***참고자료 :***

<https://brunch.co.kr/@dan-kim/26>
<br>
<https://brunch.co.kr/@dan-kim/17>
<br>
<https://ko.wikipedia.org/wiki/%EC%99%B8%EB%9E%98_%ED%82%A4>